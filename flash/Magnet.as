package {	import flash.display.*;	import flash.events.*;	import flash.text.*;	import flash.filters.DropShadowFilter;	import caurina.transitions.Tweener;	public class Magnet extends MovieClip {		var _id:Number;		var _word;		var _label;		var _x_init;		var _y_init;		function Magnet(id:Number, word:String) {			_id = id;			_word = word;			buttonMode = true;       mouseChildren = false;      addEventListener(MouseEvent.MOUSE_DOWN, pressHandler);		}		public function init() {      rotation = Math.round(Math.random()*(30))-15;			make_vinyl();			make_label();			adjust();			find_an_empty_spot();		}				function pick_a_random_spot() {		  "pick a random spot"		  x = Math.round(Math.random() * parent.x_span()) + parent._left_edge;			y = Math.round(Math.random() * parent.y_span()) + parent._top_edge;		}				function find_an_empty_spot() {		  pick_a_random_spot();		  						var bad_spot = false;			var seeking = true;			while (seeking) {        trace("looking for a spot for " + this.name)				for (i=0; i<parent._magnets.length; i++) {				  trace("check for collision.")					var m = parent._magnets[i];					if (this.hitTestObject(m)) {					  trace ("collision!")						bad_spot = true;						break;					}				}								if (bad_spot) {          pick_a_random_spot();        } else {          seeking = false;        }              }		}				function make_vinyl() {			var v = _vinyl = new MagnetVinyl();			addChild(v);		}				function make_label() {      // Font      var courier:Font = new Courier();			// Format			var f:TextFormat = new TextFormat();			f.font = courier.fontName;			f.color = 0x000000;			f.size = 11;			      // Text      var l = new TextField();      _label = l;      l.autoSize = TextFieldAutoSize.LEFT;      l.selectable = false;      l.embedFonts = true;			l.defaultTextFormat = f;			l.text = _word;			addChild(l);		}				function adjust() {		  _vinyl.width = _label.textWidth + 10		  _vinyl.x = -_vinyl.width/2		  _vinyl.y = -_vinyl.height/2		  		  _label.x = _vinyl.x + 2;		  _label.y = _vinyl.y;		}				function straighten() {		  Tweener.addTween(this, {rotation:0, time:1.5, transition:"easeOutElastic"});		}		    function move_to_top() {      parent.setChildIndex(this, parent.numChildren-1);    }				function pressHandler(event:MouseEvent):void {		  move_to_top();		  straighten();		  startDrag();		}					}}